<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curiosidades Culinarias - Panel de Gesti√≥n de Contenido</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e74c3c;
            --primary-dark: #c0392b;
            --secondary: #f39c12;
            --cuban-blue: #00205b;
            --cuban-red: #cf142b;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #95a5a6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red));
            color: white;
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .content {
            display: flex;
            min-height: 700px;
        }
        
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            padding: 30px 20px;
            border-right: 2px solid #e0e0e0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            margin: 8px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            font-weight: 500;
            color: var(--dark);
            text-decoration: none;
        }
        
        .nav-item:hover {
            transform: translateX(5px);
            border-color: var(--cuban-blue);
            background: rgba(0, 32, 91, 0.05);
        }
        
        .nav-item.active {
            background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red));
            color: white;
        }
        
        .main-content {
            flex: 1;
            padding: 30px 40px;
            overflow-y: auto;
            max-height: 700px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            color: var(--cuban-blue);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--cuban-red);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .upload-area {
            border: 3px dashed #ddd;
            border-radius: 15px;
            padding: 50px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 30px;
            background: #fafafa;
        }
        
        .upload-area:hover {
            border-color: var(--cuban-blue);
            background: rgba(0, 32, 91, 0.03);
        }
        
        .upload-area.dragover {
            border-color: var(--success);
            background: rgba(39, 174, 96, 0.05);
        }
        
        .upload-icon {
            font-size: 4rem;
            color: var(--cuban-blue);
            margin-bottom: 20px;
        }
        
        .file-input {
            display: none;
        }
        
        .upload-btn {
            background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 32, 91, 0.3);
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--cuban-blue);
            box-shadow: 0 0 0 3px rgba(0, 32, 91, 0.1);
        }
        
        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .file-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        
        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            border-color: var(--cuban-blue);
        }
        
        .file-header {
            background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red));
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .file-type {
            font-size: 1.5rem;
        }
        
        .file-content {
            padding: 20px;
        }
        
        .file-title {
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .file-info {
            display: flex;
            justify-content: space-between;
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .file-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .download-btn {
            background: var(--success);
            color: white;
        }
        
        .delete-btn {
            background: var(--danger);
            color: white;
        }
        
        .test-access-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid var(--success);
            margin-top: 40px;
        }
        
        .access-code {
            background: white;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 1.5rem;
            text-align: center;
            letter-spacing: 3px;
            margin: 20px 0;
            border: 2px dashed var(--success);
            color: var(--dark);
        }
        
        .toggle-test-btn {
            background: linear-gradient(to right, var(--success), #219653);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .toggle-test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }
        
        .toggle-test-btn.disabled {
            background: var(--gray);
            cursor: not-allowed;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(to right, var(--success), #219653);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
            animation: slideInRight 0.5s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red));
            width: 0%;
            transition: width 0.3s;
        }
        
        .folder-structure {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            margin-top: 20px;
        }
        
        .folder-tree {
            font-family: monospace;
            line-height: 1.8;
        }
        
        .folder-tree ul {
            list-style: none;
            padding-left: 20px;
        }
        
        .folder-tree li {
            position: relative;
            padding-left: 25px;
            margin: 5px 0;
        }
        
        .folder-tree li::before {
            content: "üìÅ";
            position: absolute;
            left: 0;
        }
        
        .folder-tree li.file::before {
            content: "üìÑ";
        }
        
        .folder-tree li.video::before {
            content: "üé¨";
        }
        
        .preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        
        .preview-box {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--cuban-blue);
        }
        
        .test-instructions {
            background: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--warning);
            margin-top: 30px;
        }
        
        @media (max-width: 992px) {
            .content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .files-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .upload-area {
                padding: 30px 20px;
            }
            
            .files-grid {
                grid-template-columns: 1fr;
            }
            
            .preview-box {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>
                <i class="fas fa-cloud-upload-alt"></i>
                Panel de Gesti√≥n de Contenido
            </h1>
            <div class="user-info">
                <i class="fas fa-user-shield"></i>
                <span>Administrador - Didiert Angarica</span>
            </div>
        </div>
        
        <div class="content">
            <div class="sidebar">
                <a href="#" class="nav-item active" onclick="showSection('upload')">
                    <i class="fas fa-upload"></i>
                    <span>Subir Archivos</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('manage')">
                    <i class="fas fa-folder-open"></i>
                    <span>Gestionar Archivos</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('folders')">
                    <i class="fas fa-folder-tree"></i>
                    <span>Estructura de Carpetas</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('test')">
                    <i class="fas fa-user-check"></i>
                    <span>Acceso de Prueba</span>
                </a>
                <a href="#" class="nav-item" onclick="showSection('preview')">
                    <i class="fas fa-eye"></i>
                    <span>Vista Previa Web</span>
                </a>
                <a href="#" class="nav-item" onclick="logout()" style="margin-top: 50px; background: var(--danger); color: white;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesi√≥n</span>
                </a>
            </div>
            
            <div class="main-content">
                <!-- SECCI√ìN: SUBIR ARCHIVOS -->
                <div id="upload-section" class="section active">
                    <h2 class="section-title">
                        <i class="fas fa-cloud-upload-alt"></i>
                        Subir Archivos PDF y Videos
                    </h2>
                    
                    <div class="upload-area" id="dropZone" ondragover="handleDragOver(event)" ondrop="handleDrop(event)" ondragleave="handleDragLeave(event)">
                        <div class="upload-icon">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <h3>Arrastra y suelta tus archivos aqu√≠</h3>
                        <p>o haz clic para seleccionar archivos</p>
                        <p><small>Soporta PDF, MP4, AVI, MOV, MKV (M√°x. 500MB)</small></p>
                        
                        <input type="file" class="file-input" id="fileInput" multiple accept=".pdf,.mp4,.avi,.mov,.mkv" onchange="handleFileSelect(event)">
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-folder-open"></i> Seleccionar Archivos
                        </button>
                        
                        <div id="uploadProgress" style="display: none;">
                            <div class="progress-bar">
                                <div class="progress" id="progressFill"></div>
                            </div>
                            <p id="progressText" style="margin-top: 10px; color: var(--cuban-blue);"></p>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="folderSelect">Seleccionar Carpeta de Destino:</label>
                        <select id="folderSelect" class="form-control">
                            <option value="libros">üìö Libros PDF</option>
                            <option value="videos">üé¨ Videos de Cocina</option>
                            <option value="recetas">üìù Recetas Especiales</option>
                            <option value="tutoriales">üë®‚Äçüç≥ Tutoriales</option>
                            <option value="nueva">‚ûï Crear Nueva Carpeta</option>
                        </select>
                    </div>
                    
                    <div id="newFolderSection" style="display: none;">
                        <div class="form-group">
                            <label for="newFolderName">Nombre de la Nueva Carpeta:</label>
                            <input type="text" id="newFolderName" class="form-control" placeholder="ej: Postres Cubanos">
                        </div>
                    </div>
                    
                    <button class="upload-btn" onclick="startUpload()" style="width: 100%;">
                        <i class="fas fa-upload"></i> Iniciar Subida de Archivos
                    </button>
                    
                    <div id="uploadStatus" style="margin-top: 20px;"></div>
                </div>
                
                <!-- SECCI√ìN: GESTIONAR ARCHIVOS -->
                <div id="manage-section" class="section">
                    <h2 class="section-title">
                        <i class="fas fa-folder-open"></i>
                        Archivos Subidos
                    </h2>
                    
                    <div class="form-group">
                        <label for="filterFolder">Filtrar por Carpeta:</label>
                        <select id="filterFolder" class="form-control" onchange="filterFiles()">
                            <option value="all">Todas las Carpetas</option>
                            <option value="libros">üìö Libros PDF</option>
                            <option value="videos">üé¨ Videos</option>
                            <option value="recetas">üìù Recetas</option>
                            <option value="tutoriales">üë®‚Äçüç≥ Tutoriales</option>
                        </select>
                    </div>
                    
                    <div class="files-grid" id="filesGrid">
                        <!-- Los archivos se cargar√°n aqu√≠ din√°micamente -->
                    </div>
                </div>
                
                <!-- SECCI√ìN: ESTRUCTURA DE CARPETAS -->
                <div id="folders-section" class="section">
                    <h2 class="section-title">
                        <i class="fas fa-folder-tree"></i>
                        Estructura del Sistema de Archivos
                    </h2>
                    
                    <div class="folder-structure">
                        <h3>üìÅ Directorio Principal: /curiosidades-culinarias/</h3>
                        <div class="folder-tree">
                            <ul>
                                <li>üìÅ public_html/
                                    <ul>
                                        <li>üìÅ libros-pdf/
                                            <ul id="pdfFolders">
                                                <!-- Carpetas de PDF se cargar√°n aqu√≠ -->
                                            </ul>
                                        </li>
                                        <li>üìÅ videos/
                                            <ul id="videoFolders">
                                                <!-- Carpetas de videos se cargar√°n aqu√≠ -->
                                            </ul>
                                        </li>
                                        <li>üìÅ assets/
                                            <ul>
                                                <li class="file">üìÑ logo.png</li>
                                                <li class="file">üìÑ favicon.ico</li>
                                            </ul>
                                        </li>
                                        <li class="file">üìÑ index.html</li>
                                        <li class="file">üìÑ styles.css</li>
                                        <li class="file">üìÑ script.js</li>
                                    </ul>
                                </li>
                                <li>üìÅ test-access/
                                    <ul>
                                        <li class="file">üìÑ usuario-prueba.txt</li>
                                        <li class="file">üìÑ codigo-acceso.txt</li>
                                    </ul>
                                </li>
                                <li class="file">üìÑ README.md</li>
                                <li class="file">üìÑ package.json</li>
                            </ul>
                        </div>
                    </div>
                    
                    <button class="upload-btn" onclick="refreshFolderStructure()" style="margin-top: 20px;">
                        <i class="fas fa-sync-alt"></i> Actualizar Estructura
                    </button>
                </div>
                
                <!-- SECCI√ìN: ACCESO DE PRUEBA -->
                <div id="test-section" class="section">
                    <h2 class="section-title">
                        <i class="fas fa-user-check"></i>
                        Usuario de Prueba Gratuito
                    </h2>
                    
                    <div class="test-access-section">
                        <h3>üîì Acceso de Prueba Ilimitado</h3>
                        <p>Este usuario puede descargar TODOS los archivos sin pagar. √ösalo para probar tu sitio web.</p>
                        
                        <div class="access-code" id="testAccessCode">CC-TEST-2023-ADMIN</div>
                        
                        <div style="display: flex; align-items: center; gap: 15px; margin: 20px 0;">
                            <span>Estado del acceso:</span>
                            <span class="status-badge status-active" id="testStatus">ACTIVO</span>
                        </div>
                        
                        <button class="toggle-test-btn" id="toggleTestBtn" onclick="toggleTestAccess()">
                            <i class="fas fa-power-off"></i> Desactivar Acceso de Prueba
                        </button>
                        
                        <div class="test-instructions">
                            <h4><i class="fas fa-info-circle"></i> Instrucciones:</h4>
                            <ol style="margin-left: 20px; margin-top: 10px;">
                                <li>Este c√≥digo permite acceso ilimitado a TODOS los archivos</li>
                                <li>Los usuarios normales ver√°n botones de pago</li>
                                <li>Los usuarios con este c√≥digo ver√°n botones de descarga directa</li>
                                <li>Usa este c√≥digo para probar tu sitio antes de lanzarlo</li>
                                <li>Puedes desactivarlo cuando quieras lanzar la versi√≥n de pago</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h3><i class="fas fa-qrcode"></i> C√≥digo QR para Pruebas</h3>
                        <div style="background: white; padding: 20px; border-radius: 10px; display: inline-block; margin-top: 15px; border: 2px solid var(--cuban-blue);">
                            <!-- QR Code Placeholder -->
                            <div style="width: 200px; height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                                üì±
                            </div>
                            <p style="text-align: center; margin-top: 10px; font-weight: 600;">Escanea para acceso r√°pido</p>
                        </div>
                    </div>
                </div>
                
                <!-- SECCI√ìN: VISTA PREVIA WEB -->
                <div id="preview-section" class="section">
                    <h2 class="section-title">
                        <i class="fas fa-eye"></i>
                        Vista Previa en la Web
                    </h2>
                    
                    <div class="preview-container">
                        <div class="preview-box">
                            <h3><i class="fas fa-shopping-cart"></i> Vista para Usuarios Normales</h3>
                            <div style="margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                                <h4>Fusi√≥n Caribe√±a con IA</h4>
                                <p>Libro PDF - 45 recetas</p>
                                <button style="background: linear-gradient(to right, var(--cuban-blue), var(--cuban-red)); color: white; border: none; padding: 12px 20px; border-radius: 6px; width: 100%; margin-top: 15px; cursor: pointer;">
                                    <i class="fas fa-shopping-cart"></i> Comprar por $9.99 USD
                                </button>
                                <p style="text-align: center; margin-top: 10px; color: var(--gray); font-size: 0.9rem;">
                                    (‚âà 250 CUP desde Cuba)
                                </p>
                            </div>
                            <p>Los usuarios normales ven botones de compra y deben pagar para descargar.</p>
                        </div>
                        
                        <div class="preview-box">
                            <h3><i class="fas fa-unlock-alt"></i> Vista para Usuario de Prueba</h3>
                            <div style="margin: 20px 0; padding: 20px; background: #d4edda; border-radius: 8px; border-left: 4px solid var(--success);">
                                <h4>Fusi√≥n Caribe√±a con IA</h4>
                                <p>Libro PDF - 45 recetas</p>
                                <button style="background: var(--success); color: white; border: none; padding: 12px 20px; border-radius: 6px; width: 100%; margin-top: 15px; cursor: pointer;">
                                    <i class="fas fa-download"></i> DESCARGAR GRATIS
                                </button>
                                <p style="text-align: center; margin-top: 10px; color: #155724; font-weight: 600;">
                                    <i class="fas fa-user-check"></i> Acceso de Prueba ACTIVO
                                </p>
                            </div>
                            <p>El usuario de prueba ve botones de descarga directa sin pago.</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 10px; border: 2px solid var(--warning);">
                        <h3><i class="fas fa-code"></i> C√≥digo para Implementar en tu Web</h3>
                        <pre style="background: #2c3e50; color: white; padding: 15px; border-radius: 8px; margin-top: 15px; overflow-x: auto;">
&lt;?php
// Verificar acceso de prueba
$access_code = $_GET['access'] ?? '';
$is_test_user = ($access_code === 'CC-TEST-2023-ADMIN');

if ($is_test_user) {
    // Mostrar botones de descarga gratuita
    echo '&lt;button class="download-btn-free"&gt;DESCARGAR GRATIS&lt;/button&gt;';
} else {
    // Mostrar botones de compra
    echo '&lt;button class="buy-btn"&gt;Comprar por $9.99&lt;/button&gt;';
}
?&gt;
                        </pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification"></div>

    <script>
        // Sistema de Archivos Virtual
        let fileSystem = {
            'libros': [
                {name: 'Fusi√≥n Caribe√±a con IA.pdf', size: '2.4 MB', date: '2023-10-15', type: 'pdf'},
                {name: 'Cocina Internacional AI.pdf', size: '1.8 MB', date: '2023-10-10', type: 'pdf'},
                {name: 'Postres con Chat GPT.pdf', size: '1.5 MB', date: '2023-10-05', type: 'pdf'}
            ],
            'videos': [
                {name: 'C√≥mo hacer Ropa Vieja.mp4', size: '45 MB', date: '2023-10-12', type: 'video'},
                {name: 'Tutorial Arroz con Pollo.mov', size: '68 MB', date: '2023-10-08', type: 'video'}
            ],
            'recetas': [
                {name: 'Recetas Tradicionales Cubanas.pdf', size: '3.2 MB', date: '2023-10-18', type: 'pdf'}
            ],
            'tutoriales': [
                {name: 'T√©cnicas de Cocina B√°sica.mp4', size: '120 MB', date: '2023-10-20', type: 'video'}
            ]
        };

        // Estado del acceso de prueba
        let testAccessActive = true;
        const TEST_ACCESS_CODE = 'CC-TEST-2023-ADMIN';

        // Mostrar notificaci√≥n
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            // Color seg√∫n tipo
            if (type === 'error') {
                notification.style.background = 'linear-gradient(to right, var(--danger), #c0392b)';
            } else if (type === 'warning') {
                notification.style.background = 'linear-gradient(to right, var(--warning), #e67e22)';
            }
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 4000);
        }

        // Cambiar secci√≥n
        function showSection(sectionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Quitar active de todos los items del men√∫
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Mostrar secci√≥n seleccionada
            document.getElementById(sectionId + '-section').classList.add('active');
            
            // Marcar item del men√∫ como activo
            event.currentTarget.classList.add('active');
            
            // Cargar datos seg√∫n secci√≥n
            if (sectionId === 'manage') {
                loadFiles();
            } else if (sectionId === 'folders') {
                loadFolderStructure();
            } else if (sectionId === 'test') {
                updateTestStatus();
            }
        }

        // Manejar arrastrar y soltar
        function handleDragOver(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('dropZone').classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('dropZone').classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.stopPropagation();
            document.getElementById('dropZone').classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            handleFiles(files);
        }

        // Manejar selecci√≥n de archivos
        function handleFileSelect(e) {
            const files = e.target.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            if (files.length === 0) return;
            
            let fileList = '';
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                fileList += `<div>üìÑ ${file.name} (${formatFileSize(file.size)})</div>`;
            }
            
            document.getElementById('uploadStatus').innerHTML = `
                <div style="background: #e8f4fd; padding: 15px; border-radius: 8px; border-left: 4px solid var(--cuban-blue); margin-top: 20px;">
                    <h4><i class="fas fa-file-alt"></i> Archivos seleccionados (${files.length}):</h4>
                    ${fileList}
                </div>
            `;
            
            showNotification(`${files.length} archivo(s) seleccionado(s)`, 'success');
        }

        // Iniciar subida
        function startUpload() {
            const folderSelect = document.getElementById('folderSelect');
            const selectedFolder = folderSelect.value;
            
            if (selectedFolder === 'nueva') {
                const newFolderName = document.getElementById('newFolderName').value;
                if (!newFolderName) {
                    showNotification('Por favor ingresa un nombre para la nueva carpeta', 'error');
                    return;
                }
                
                // Crear nueva carpeta
                fileSystem[newFolderName.toLowerCase().replace(/\s+/g, '-')] = [];
                showNotification(`Carpeta "${newFolderName}" creada correctamente`, 'success');
                
                // Actualizar selector de carpetas
                updateFolderSelect();
            }
            
            // Simular subida
            const progressBar = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const uploadProgress = document.getElementById('uploadProgress');
            
            uploadProgress.style.display = 'block';
            progressBar.style.width = '0%';
            progressText.textContent = 'Preparando archivos...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `Subiendo... ${Math.round(progress)}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    progressText.textContent = '¬°Subida completada!';
                    
                    // Simular archivos subidos
                    setTimeout(() => {
                        showNotification('Archivos subidos exitosamente al servidor', 'success');
                        uploadProgress.style.display = 'none';
                        
                        // Actualizar lista de archivos
                        if (document.getElementById('manage-section').classList.contains('active')) {
                            loadFiles();
                        }
                    }, 500);
                }
            }, 200);
        }

        // Cargar archivos
        function loadFiles() {
            const filesGrid = document.getElementById('filesGrid');
            const filter = document.getElementById('filterFolder').value;
            
            let allFiles = [];
            
            if (filter === 'all') {
                // Combinar todos los archivos de todas las carpetas
                for (const folder in fileSystem) {
                    fileSystem[folder].forEach(file => {
                        allFiles.push({...file, folder});
                    });
                }
            } else {
                // Solo archivos de la carpeta seleccionada
                if (fileSystem[filter]) {
                    allFiles = fileSystem[filter].map(file => ({...file, folder: filter}));
                }
            }
            
            if (allFiles.length === 0) {
                filesGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 50px; color: var(--gray);">
                        <i class="fas fa-folder-open" style="font-size: 3rem; margin-bottom: 20px; display: block;"></i>
                        <h3>No hay archivos en esta carpeta</h3>
                        <p>Sube algunos archivos para comenzar</p>
                    </div>
                `;
                return;
            }
            
            filesGrid.innerHTML = allFiles.map(file => `
                <div class="file-card">
                    <div class="file-header">
                        <span class="file-type">
                            ${file.type === 'pdf' ? 'üìÑ' : 'üé¨'}
                        </span>
                        <span style="font-size: 0.8rem; background: white; color: var(--cuban-blue); padding: 3px 8px; border-radius: 10px;">
                            ${file.folder}
                        </span>
                    </div>
                    <div class="file-content">
                        <div class="file-title">${file.name}</div>
                        <div class="file-info">
                            <span>${file.size}</span>
                            <span>${file.date}</span>
                        </div>
                        <div class="file-actions">
                            <button class="action-btn download-btn" onclick="downloadFile('${file.name}', '${file.folder}')">
                                <i class="fas fa-download"></i> Descargar
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteFile('${file.name}', '${file.folder}')">
                                <i class="fas fa-trash"></i> Eliminar
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filtrar archivos
        function filterFiles() {
            loadFiles();
        }

        // Descargar archivo
        function downloadFile(filename, folder) {
            showNotification(`Descargando "${filename}"...`, 'success');
            
            // Simular descarga
            setTimeout(() => {
                const blob = new Blob([`Contenido simulado de ${filename}`], {type: 'text/plain'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification(`"${filename}" descargado correctamente`, 'success');
            }, 500);
        }

        // Eliminar archivo
        function deleteFile(filename, folder) {
            if (!confirm(`¬øEst√°s seguro de eliminar "${filename}"?`)) return;
            
            // Eliminar del sistema de archivos
            fileSystem[folder] = fileSystem[folder].filter(file => file.name !== filename);
            
            showNotification(`"${filename}" eliminado correctamente`, 'success');
            loadFiles();
            loadFolderStructure();
        }

        // Cargar estructura de carpetas
        function loadFolderStructure() {
            const pdfFolders = document.getElementById('pdfFolders');
            const videoFolders = document.getElementById('videoFolders');
            
            let pdfItems = '';
            let videoItems = '';
            
            for (const folder in fileSystem) {
                const files = fileSystem[folder];
                let hasPDF = files.some(f => f.type === 'pdf');
                let hasVideo = files.some(f => f.type === 'video');
                
                if (hasPDF) {
                    pdfItems += `<li>üìÅ ${folder}/ (${files.filter(f => f.type === 'pdf').length} archivos)</li>`;
                }
                
                if (hasVideo) {
                    videoItems += `<li>üìÅ ${folder}/ (${files.filter(f => f.type === 'video').length} archivos)</li>`;
                }
            }
            
            pdfFolders.innerHTML = pdfItems || '<li><em>No hay carpetas de PDF</em></li>';
            videoFolders.innerHTML = videoItems || '<li><em>No hay carpetas de video</em></li>';
        }

        // Actualizar selector de carpetas
        function updateFolderSelect() {
            const folderSelect = document.getElementById('folderSelect');
            const currentValue = folderSelect.value;
            
            let options = `
                <option value="libros">üìö Libros PDF</option>
                <option value="videos">üé¨ Videos de Cocina</option>
                <option value="recetas">üìù Recetas Especiales</option>
                <option value="tutoriales">üë®‚Äçüç≥ Tutoriales</option>
            `;
            
            // Agregar carpetas personalizadas
            for (const folder in fileSystem) {
                if (!['libros', 'videos', 'recetas', 'tutoriales'].includes(folder)) {
                    const displayName = folder.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    options += `<option value="${folder}">üìÅ ${displayName}</option>`;
                }
            }
            
            options += `<option value="nueva">‚ûï Crear Nueva Carpeta</option>`;
            
            folderSelect.innerHTML = options;
            folderSelect.value = currentValue;
        }

        // Mostrar/ocultar secci√≥n nueva carpeta
        document.getElementById('folderSelect').addEventListener('change', function() {
            const newFolderSection = document.getElementById('newFolderSection');
            newFolderSection.style.display = this.value === 'nueva' ? 'block' : 'none';
        });

        // Actualizar estado del acceso de prueba
        function updateTestStatus() {
            const statusElement = document.getElementById('testStatus');
            const button = document.getElementById('toggleTestBtn');
            const codeElement = document.getElementById('testAccessCode');
            
            if (testAccessActive) {
                statusElement.textContent = 'ACTIVO';
                statusElement.className = 'status-badge status-active';
                button.innerHTML = '<i class="fas fa-power-off"></i> Desactivar Acceso de Prueba';
                button.className = 'toggle-test-btn';
                codeElement.style.borderColor = 'var(--success)';
                codeElement.style.color = '#155724';
            } else {
                statusElement.textContent = 'INACTIVO';
                statusElement.className = 'status-badge status-inactive';
                button.innerHTML = '<i class="fas fa-power-off"></i> Activar Acceso de Prueba';
                button.className = 'toggle-test-btn';
                codeElement.style.borderColor = '#721c24';
                codeElement.style.color = '#721c24';
            }
        }

        // Activar/desactivar acceso de prueba
        function toggleTestAccess() {
            testAccessActive = !testAccessActive;
            updateTestStatus();
            
            const action = testAccessActive ? 'activado' : 'desactivado';
            showNotification(`Acceso de prueba ${action} correctamente`, testAccessActive ? 'success' : 'warning');
        }

        // Refrescar estructura de carpetas
        function refreshFolderStructure() {
            loadFolderStructure();
            showNotification('Estructura de carpetas actualizada', 'success');
        }

        // Formatear tama√±o de archivo
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Cerrar sesi√≥n
        function logout() {
            if (confirm('¬øEst√°s seguro de cerrar sesi√≥n?')) {
                showNotification('Sesi√≥n cerrada correctamente', 'success');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            }
        }

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            updateFolderSelect();
            loadFolderStructure();
            updateTestStatus();
            
            // Mostrar notificaci√≥n de bienvenida
            setTimeout(() => {
                showNotification('Panel de gesti√≥n cargado correctamente', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
